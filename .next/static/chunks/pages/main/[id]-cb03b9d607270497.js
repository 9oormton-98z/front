(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[104],{2805:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/main/[id]",function(){return n(6536)}])},6185:function(e,t,n){"use strict";var r=n(196).Z.create();r.defaults.baseURL="http://velm:8080",t.Z=r},6475:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(5893),a=n(13),i=n(1163),s=n(7294);function o(e){e.headerTitle;var t=e.isBack,n=e.isMyBook,o=(0,i.useRouter)(),c=function(){o.back()},l=function(){o.push("/mybook")};return(0,s.useEffect)(function(){}),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"pt-[34px]"}),(0,r.jsxs)("nav",{className:"grid h-[64px] grid-cols-[1fr_3fr_1fr]",children:[t&&(0,r.jsx)("div",{className:"col-start-1 flex items-center justify-start pl-5",children:(0,r.jsx)(a.Z,{className:"h-6 w-6",onClick:c})}),(0,r.jsx)("h2",{className:"col-start-2 flex items-center justify-center",children:(0,r.jsx)("img",{src:"/HeaderLogo.png",className:"h-14 w-36"})}),n&&(0,r.jsx)("div",{className:"col-start-3 flex items-center justify-end pr-5",children:(0,r.jsx)("img",{src:"/MyBook.png",className:"h-8 w-8",onClick:l})})]})]})}},6536:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return j}});var r=n(7568),a=n(1799),i=n(655),s=n(5893),o=n(6185),c=function(e){var t=localStorage.getItem("nickname");return o.Z.post("/api/v1/place/".concat(e),{nickname:t})},l=function(e){var t=e.placeId,n={nickname:localStorage.getItem("nickname")};return o.Z.post("/api/v1/place/visit/"+t,n)},u=n(4829),d=n(728),m=n(7294),f=n(5652),p=n(4248);function h(e){var t=e.closeModal,n=e.innerText,r=e.imageURL,a=e.visited,i=e.onStampClick,o=e.distance;return console.log(o),(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(u.u,{appear:!0,show:!0,as:m.Fragment,children:(0,s.jsxs)(d.V,{as:"div",className:"relative z-10",onClose:t,children:[(0,s.jsx)(u.u.Child,{as:m.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-25"})}),(0,s.jsx)("div",{className:"fixed inset-0 overflow-y-auto",children:(0,s.jsx)("div",{className:"flex min-h-full items-center justify-center p-4 text-center",children:(0,s.jsx)(u.u.Child,{as:m.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:(0,s.jsxs)(d.V.Panel,{className:"relative flex w-full max-w-md transform flex-col items-center overflow-hidden rounded-2xl bg-white p-6 text-left align-middle shadow-xl transition-all",children:[(0,s.jsx)(f.Z,{className:"absolute right-5 top-3 h-7 w-7 text-[#AE1E27]",onClick:t}),(0,s.jsx)("div",{className:"m-auto mt-6 aspect-square w-64",children:(0,s.jsx)("img",{src:r,className:"h-full w-full"})}),(0,s.jsx)("div",{className:"mt-2",children:(0,s.jsx)("p",{className:"text-lg",children:n})}),!a&&(0,s.jsx)("div",{className:"mt-4",children:(0,s.jsx)("button",{type:"button",className:(0,p.Z)("inline-flex justify-center rounded-md border border-transparent bg-[#AE1E27] bg-opacity-[16%] px-4 py-2 text-sm font-medium text-[#AE1E27] outline-none","disabled:bg-gray-100 disabled:text-gray-500"),onClick:i,disabled:o>100||-1==o,children:"도장찍기"})}),a||-1!=o?o>100&&(0,s.jsx)("div",{className:"mt-2 text-center text-[#D91C29]",children:"100m 이내에만 버튼이 활성화됩니다."}):(0,s.jsx)("div",{className:"tet-[#D91C29] mt-2 text-center",children:"거리를 계산 중입니다."})]})})})})]})})})}var x=n(6475),v=n(1163);function g(e,t,n,r){if(e==n&&t==r)return 0;var a=Math.PI*e/180,i=Math.PI*n/180,s=Math.sin(a)*Math.sin(i)+Math.cos(a)*Math.cos(i)*Math.cos(Math.PI*(t-r)/180);return s>1&&(s=1),s=180*(s=Math.acos(s))/Math.PI,s*=111189.57696,s=s<100?10*Math.round(s/10):100*Math.round(s/100)}var j=function(){var e,t=(0,m.useState)(!1),n=t[0],o=t[1],u=(0,m.useState)(),d=u[0],f=u[1],p=(0,m.useState)(-1),j=p[0],y=p[1],b=(0,v.useRouter)();(0,m.useEffect)(function(){function e(){return(e=(0,r.Z)(function(){var e;return(0,i.__generator)(this,function(t){switch(t.label){case 0:if(!b.query.id)return[2];return[4,c(b.query.id)];case 1:return e=t.sent(),console.log(e),f(e.data),[2]}})})).apply(this,arguments)}!function(){return e.apply(this,arguments)}()},[b.query.id]);var N=(e=(0,r.Z)(function(){var e,t;return(0,i.__generator)(this,function(n){switch(n.label){case 0:return[4,l({placeId:null==d?void 0:d.placeId.toString()})];case 1:var r,i;return e=n.sent(),console.log(e),r=(0,a.Z)({},d),f((i=(i={stampImageUrl:e.data,visited:!0},i),Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(i)):(function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n.push.apply(n,r)}return n})(Object(i)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(i,e))}),t=r)),[2]}})}),function(){return e.apply(this,arguments)});return(0,m.useEffect)(function(){if(d&&navigator.geolocation){navigator.geolocation.getCurrentPosition(function(e){var t=g(e.coords.latitude,e.coords.longitude,null==d?void 0:d.latitude,null==d?void 0:d.longitude);y(t)},function(e){console.error(e)},{enableHighAccuracy:!1,maximumAge:0,timeout:1/0});var e=setInterval(function(){navigator.geolocation.getCurrentPosition(function(e){var t=g(e.coords.latitude,e.coords.longitude,null==d?void 0:d.latitude,null==d?void 0:d.longitude);y(t)},function(e){console.error(e)},{enableHighAccuracy:!1,maximumAge:0,timeout:1/0})},3e3);return function(){return clearInterval(e)}}},[d]),(0,s.jsxs)("div",{className:"relative h-fit w-full pb-16",children:[(0,s.jsx)(x.Z,{headerTitle:"Logo",isBack:!0,isMyBook:!0}),(0,s.jsxs)("section",{className:"relative aspect-square w-full px-12 pt-[62px]",children:[(0,s.jsx)("img",{src:null==d?void 0:d.placeImageUrlDtoList[0].imageUrl,className:"rounded-lg"}),(0,s.jsx)("img",{src:null==d?void 0:d.stampImageUrl,className:"absolute right-0 bottom-0 h-32 w-32",onClick:function(){return o(!0)}})]}),n&&(0,s.jsx)(h,{visited:!!d&&(null==d?void 0:d.visited),imageURL:null==d?void 0:d.stampImageUrl,closeModal:function(){return o(!1)},innerText:null==d?void 0:d.name,onStampClick:N,distance:j}),(0,s.jsxs)("section",{className:"px-12",children:[(0,s.jsx)("h3",{className:"w-full rounded-md border border-gray-300 py-2 text-center",children:null==d?void 0:d.name}),(0,s.jsx)("p",{className:"mt-2 w-full rounded-md border border-gray-300 py-2 px-4 text-center",children:null==d?void 0:d.address}),(0,s.jsx)("p",{className:"mt-4 w-full rounded-md border border-gray-300 py-2 px-4 text-center",children:null==d?void 0:d.description})]})]})}},4248:function(e,t,n){"use strict";function r(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter(function(e){return e}).join(" ")}n.d(t,{Z:function(){return r}})}},function(e){e.O(0,[600,374,774,888,179],function(){return e(e.s=2805)}),_N_E=e.O()}]);